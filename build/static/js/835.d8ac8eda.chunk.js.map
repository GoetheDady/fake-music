{"version":3,"file":"static/js/835.d8ac8eda.chunk.js","mappings":"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","sources":["api/index.js","pages/video/style.js","pages/video/components/hotCategory.js","pages/video/index.js","components/popupWindow/index.js","utils/index.js"],"sourcesContent":["import Axios from 'axios';\nimport { message } from '../utils';\n\nconst request = Axios.create({\n  baseURL: 'http://localhost:4000/', // api 的 base_url\n  timeout: 5000, // request timeout  设置请求超时时间\n  responseType: 'json',\n  withCredentials: true, // 是否允许带cookie这些\n  crossDomain: true,\n  headers: {\n    'Content-Type': 'application/json;charset=utf-8',\n  },\n});\n\nrequest.interceptors.response.use(\n  (res) => res.data, // 这里直接返回data, 即接口返回的所有数据\n  (error) => {\n    const { response: { data: { code, msg, message: sysMessage }, data } } = error;\n    if (code === 301) {\n      message({\n        type: 'error',\n        msg,\n        message: sysMessage,\n      });\n    }\n    return data;\n  },\n);\n\nexport default request;\n","import styled from 'styled-components';\n\nexport const VideoStyle = styled.div`\n  width: 100%;\n  padding: 30px;\n`;\n","import { useState } from 'react';\nimport styled from 'styled-components';\nimport _findIndex from 'lodash/findIndex';\n\nconst HotCategoryStyle = styled.div`\n  width: 100%;\n  display: flex;\n`;\n\nconst HotCategoryItem = styled.div`\n  display: flex;\n  font-size: 12px;\n  padding: 0 15px;\n  cursor: default;\n  user-select: none;\n  height: 20px;\n  background-color: rgba(155, 178, 210, .2);\n  align-items: center;\n  border-radius: 10px;\n  margin-right: 10px;\n  margin-bottom: 15px;\n  &:hover {\n    background-color: rgba(155, 178, 210, .6);\n  }\n  &.active {\n    background-color: rgba(155, 178, 210, .6);\n  }\n`;\n\nfunction HotCategory(props) {\n  const { list = [], setCurrentTag, currentTag } = props;\n\n  return (\n    <HotCategoryStyle>\n      {\n        list.map((item) => (\n          <HotCategoryItem\n            key={item.id}\n            data-id={item.id}\n            className={currentTag === item.id && 'active'}\n            onClick={() => { setCurrentTag(item.id); }}\n          >\n            {item.name}\n          </HotCategoryItem>\n        ))\n      }\n    </HotCategoryStyle>\n  );\n}\n\nexport default HotCategory;\n","import { useEffect, useState } from 'react';\nimport { VideoStyle } from './style';\nimport HotCategory from './components/hotCategory';\nimport request from '../../api';\n\nfunction Video() {\n  const [categoryList, setCategoryList] = useState([]);\n  const [currentTag, setCurrentTag] = useState(0);\n\n  const getVideoList = async () => {\n    const res = await request.get('/video/timeline/all', {\n      // params: {\n      //   id: currentTag,\n      // },\n    });\n  };\n\n  const init = async () => {\n    // 获取视频分类\n    const { data } = await request.get('/video/group/list');\n    setCategoryList(data.slice(0, 9));\n    getVideoList();\n  };\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  useEffect(() => {\n    getVideoList();\n  }, [currentTag]);\n\n  return (\n    <VideoStyle>\n      <HotCategory list={categoryList} setCurrentTag={setCurrentTag} currentTag={currentTag} />\n    </VideoStyle>\n  );\n}\n\nexport default Video;\n","import { useEffect } from 'react';\nimport styled from 'styled-components';\nimport Icon from '../icon';\n\nconst PopupWindowStyle = styled.div`\n  position: fixed;\n  top: 8px;\n  left: 0;\n  right: 0;\n  display: flex;\n  justify-content: center;\n`;\n\nconst PopupContent = styled.div`\n  display: flex;\n  padding: 10px 16px;\n  background: #fff;\n  border-radius: 2px;\n  box-shadow: 0 3px 6px -4px #0000001f,0 6px 16px #00000014,0 9px 28px 8px #0000000d;\n  font-size: 14px;\n  align-items: center;\n`;\n\nfunction PopupWindow(props) {\n  const {\n    destroy, message, msg, type,\n  } = props;\n  let iconConfig = {\n    name: 'close-circle-sharp',\n    color: 'red',\n  };\n  if (type === 'error') {\n    iconConfig = {\n      name: 'close-circle-sharp',\n      color: 'red',\n    };\n  }\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      destroy();\n    }, 3000);\n    return () => {\n      clearTimeout(timer);\n    };\n  });\n  return (\n    <PopupWindowStyle>\n      <PopupContent>\n        <Icon {...iconConfig} fontSize=\"18px\" />\n        {`${message}: ${msg}`}\n      </PopupContent>\n    </PopupWindowStyle>\n  );\n}\n\nexport default PopupWindow;\n","import ReactDom, { createPortal } from 'react-dom';\nimport PopupWindow from '../components/popupWindow';\n\nexport const calculatePlayCount = (count) => {\n  const countStr = count.toString();\n  const { length } = countStr.split('');\n  let num = '';\n  if (length > 8) {\n    num = `${countStr.slice(0, length - 8)}亿`;\n  } else if (length > 4) {\n    num = `${countStr.slice(0, length - 4)}万`;\n  } else {\n    num = `${count}`;\n  }\n  return num;\n};\n\nexport const formatDuration = (time = 0) => {\n  const s = Math.floor(time / 1000);\n  let duration = '00:00';\n  if (s < 60 && s > 0) {\n    duration = `00:${s}`;\n  } else {\n    const remainM = {\n      num: Math.floor(s / 60),\n      length: (`${Math.floor(s / 60)}`).length,\n    };\n    const remainS = {\n      num: s - remainM.num * 60,\n      length: (`${s - remainM.num * 60}`).toString().length,\n    };\n    const mm = remainM.length <= 1 ? `0${remainM.num}` : `${remainM.num}`;\n    const ss = remainS.length <= 1 ? `0${remainS.num}` : `${remainS.num}`;\n    duration = `${mm}:${ss}`;\n  }\n  return duration;\n};\n\nexport const message = (props) => {\n  let div = document.querySelector('#popup-window');\n  if (!div) {\n    div = document.createElement('div');\n    div.setAttribute('id', 'popup-window');\n    document.body.appendChild(div);\n  }\n\n  const currentConfig = { ...props };\n\n  const destroy = () => {\n    const unmountResult = ReactDom.unmountComponentAtNode(div);\n    if (unmountResult && div.parentNode) {\n      div.parentNode.removeChild(div);\n    }\n  };\n\n  const render = (config) => {\n    ReactDom.render(\n      <PopupWindow destroy={destroy} {...config} />,\n      div,\n    );\n  };\n\n  render(currentConfig);\n};\n"],"names":["request","Axios","baseURL","timeout","responseType","withCredentials","crossDomain","headers","interceptors","response","use","res","data","error","code","msg","sysMessage","message","type","VideoStyle","styled","HotCategoryStyle","HotCategoryItem","props","list","setCurrentTag","currentTag","map","item","id","className","onClick","name","useState","categoryList","setCategoryList","getVideoList","init","slice","useEffect","PopupWindowStyle","PopupContent","destroy","iconConfig","color","timer","setTimeout","clearTimeout","fontSize","calculatePlayCount","count","countStr","toString","length","split","formatDuration","time","s","Math","floor","duration","remainM","num","remainS","mm","ss","div","document","querySelector","createElement","setAttribute","body","appendChild","config","currentConfig","ReactDom","parentNode","removeChild"],"sourceRoot":""}