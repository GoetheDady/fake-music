(self.webpackChunkmusic=self.webpackChunkmusic||[]).push([[420],{9396:function(n,t,e){"use strict";var r=e(4569),i=e.n(r)().create({baseURL:"http://localhost:4000/",timeout:5e3,responseType:"json",withCredentials:!0,crossDomain:!0,headers:{"Content-Type":"application/json;charset=utf-8"}});i.interceptors.response.use((function(n){return n.data}),(function(n){return n})),t.Z=i},5232:function(n,t,e){"use strict";var r,i=e(168),o=e(5751),c=e(184),a=o.ZP.span(r||(r=(0,i.Z)(["\n  font-size: ",";\n  color: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 2px;\n"])),(function(n){return n.data.fontSize}),(function(n){return n.data.color}));t.Z=function(n){var t=n.name,e=n.fontSize,r=void 0===e?"14px":e,i=n.color,o=void 0===i?"#fff":i;return(0,c.jsx)(a,{data:{fontSize:r,color:o},children:(0,c.jsx)("ion-icon",{name:t})})}},6344:function(n,t,e){"use strict";e.d(t,{Z:function(){return R}});var r,i,o,c,a,s,u,l,f,d,p=e(168),h=e(5751),x=e(9144),g=e.n(x),v=h.ZP.div(r||(r=(0,p.Z)(["\n  ","\n  position: relative;\n  display: flex;\n  align-items: center;\n  border-radius: 6px;\n  overflow: hidden;\n"])),(function(n){var t="";return g()(n,(function(n,e){"children"!==e&&"theme"!==e&&(t+="".concat(e,":").concat(n,";"))})),t})),m=h.ZP.div(i||(i=(0,p.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  opacity: 0;\n  transition: all .5s;\n  background: linear-gradient(rgba(0, 0, 0, 0.4), transparent, rgba(0, 0, 0, 0.4));\n"]))),y=h.ZP.div(o||(o=(0,p.Z)(["\n  width: 100%;\n  font-size: 14px;\n  min-height: 370px;\n"]))),b=h.ZP.div(c||(c=(0,p.Z)(["\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  padding-bottom: 10px;\n"]))),Z=h.ZP.div(a||(a=(0,p.Z)(["\n  display: flex;\n  padding-left: 10px;\n  border-right: 1px solid #9BB2D2;\n  box-sizing: border-box;\n  &:last-child {\n    border-right: none;\n    justify-content: center;\n    flex: 1;\n  }\n  &:nth-child(1) {\n    width: 350px;\n  }\n  &:nth-child(2) {\n    width: 250px;\n  }\n  &:nth-child(3) {\n    width: 250px;\n  }\n"]))),j=h.ZP.div(s||(s=(0,p.Z)(["\n"]))),w=h.ZP.div(u||(u=(0,p.Z)(["\n  display: flex;\n  width: 100%;\n  justify-content: space-between;\n  border-radius: 8px;\n  &:nth-child(odd) {\n    background-color: rgba(155, 178, 210, .2);\n  }\n  &:hover {\n    background-color: rgba(155, 178, 210, .4);\n    "," {\n      background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4));\n      display: flex;\n      opacity: 1;\n    }\n  }\n"])),m),k=h.ZP.div(l||(l=(0,p.Z)(["\n  display: flex;\n  padding-left: 10px;\n  box-sizing: border-box;\n  height: 54px;\n  align-items: center;\n  &:last-child {\n    justify-content: center;\n    flex: 1;\n  }\n  &:nth-child(1) {\n    width: 350px;\n  }\n  &:nth-child(2) {\n    width: 250px;\n  }\n  &:nth-child(3) {\n    width: 250px;\n  }\n"]))),P=h.ZP.img(f||(f=(0,p.Z)(["\n  width: 40px;\n  height: 40px;\n  border-radius: 6px;\n  object-fit: cover;\n"]))),D=h.ZP.span(d||(d=(0,p.Z)(["\n  flex: 1;\n  width: 100%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n"]))),S=e(5232),L=e(2703),O=e(1413),z=e(184);var C=function(n){var t=n.children,e=n.style,r=n.maskContent;return(0,z.jsxs)(v,(0,O.Z)((0,O.Z)({},e),{},{children:[t,(0,z.jsx)(m,{children:r})]}))};var R=function(n){var t=n.list,e=void 0===t?[]:t;return(0,z.jsxs)(y,{children:[(0,z.jsxs)(b,{children:[(0,z.jsx)(Z,{children:"\u6b4c\u66f2"}),(0,z.jsx)(Z,{children:"\u827a\u4eba"}),(0,z.jsx)(Z,{children:"\u4e13\u8f91"}),(0,z.jsx)(Z,{children:(0,z.jsx)(S.Z,{name:"time-outline",fontSize:"16px"})})]}),(0,z.jsx)(j,{children:e.map((function(n){return(0,z.jsxs)(w,{children:[(0,z.jsxs)(k,{children:[(0,z.jsx)(C,{style:{"margin-right":"10px"},maskContent:(0,z.jsx)(S.Z,{name:"play",fontSize:"18px"}),children:(0,z.jsx)(P,{src:n.al.picUrl})}),(0,z.jsx)(D,{children:n.name})]}),(0,z.jsx)(k,{children:(0,z.jsx)(D,{children:n.ar.map((function(n){return n.name})).join("/")})}),(0,z.jsx)(k,{children:(0,z.jsx)(D,{children:n.al.name})}),(0,z.jsxs)(k,{children:[(0,z.jsx)(S.Z,{name:"add",fontSize:"20px"}),(0,L.L)(n.dt)]})]},n.id)}))})]})}},4717:function(n,t,e){"use strict";e.d(t,{E:function(){return a},d:function(){return s}});var r=e(8152),i=e(6871),o=e(2791),c=e(184);function a(n){return function(t){var e=(0,i.TH)(),r=(0,i.UO)(),o=(0,i.s0)();return(0,c.jsx)(n,{location:e,params:r,navigate:o})}}function s(n){var t=(0,o.useState)(!1),e=(0,r.Z)(t,2),i=e[0],c=e[1];return(0,o.useEffect)((function(){if(0!==n.length){var t=n.map((function(n){return new Promise((function(t,e){var r=new Image;r.onload=function(){r.onload=null,t(r)},r.error=function(){e(new Error("\u56fe\u7247\u52a0\u8f7d\u5931\u8d25"))},r.src=n}))}));Promise.all(t).then((function(n){c(!0)}))}}),[n]),0!==n.length&&i}},1420:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return H}});var r,i,o,c,a,s,u,l,f,d,p=e(5861),h=e(5671),x=e(3144),g=e(9340),v=e(5716),m=e(7757),y=e.n(m),b=e(2791),Z=e(1316),j=e.n(Z),w=e(9396),k=e(168),P=e(5751),D=P.ZP.div(r||(r=(0,k.Z)(["\n  width: 100%;\n  padding: 30px;\n  overflow: auto;\n"]))),S=P.ZP.div(i||(i=(0,k.Z)(["\n  display: flex;\n  width: 100%;\n  margin-bottom: 30px;\n"]))),L=P.ZP.img(o||(o=(0,k.Z)(["\n  width: 270px;\n  height: 270px;\n  object-fit: cover;\n  border-radius: 8px;\n  box-shadow: 0 0 10px grey;\n  margin-right: 35px;\n"]))),O=P.ZP.div(c||(c=(0,k.Z)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column-reverse;\n"]))),z=P.ZP.div(a||(a=(0,k.Z)(["\n  display: flex;\n  justify-content: space-between;\n"]))),C=P.ZP.div(s||(s=(0,k.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100px;\n  height: 30px;\n  background-color: rgba(155, 178, 210, .2);\n  border-radius: 6px;\n  cursor: pointer;\n  &:hover {\n    background-color: rgba(155, 178, 210, .6);\n  }\n"]))),R=P.ZP.div(u||(u=(0,k.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 80px;\n  height: 30px;\n  background-color: rgba(155, 178, 210, .2);\n  border-radius: 15px;\n  cursor: pointer;\n  &:hover {\n    background-color: rgba(155, 178, 210, .6);\n  }\n"]))),I=P.ZP.div(l||(l=(0,k.Z)(["\n  font-size: 24px;\n  margin-bottom: 5px;\n"]))),B=P.ZP.div(f||(f=(0,k.Z)(["\n  font-size: 20px;\n  color: rgba(155, 178, 210, 1);\n  margin-bottom: 100px;\n"]))),T=P.ZP.div(d||(d=(0,k.Z)(["\n  position: relative;\n  height: 40px;\n"]))),E=e(5232),_=e(6344),A=e(1241),U=e(4717),N=e(184),M=function(n){(0,g.Z)(e,n);var t=(0,v.Z)(e);function e(n){var r;return(0,h.Z)(this,e),(r=t.call(this,n)).detailDom=(0,b.createRef)(),r.loadingDom=(0,b.createRef)(),r.state={detail:{},trackIdsArr:[],songDetailList:[],getNewDetailList:!0,showLoading:!0},r}return(0,x.Z)(e,[{key:"componentDidMount",value:function(){var n=this,t=this.detailDom,e=this.loadingDom;this.state.getNewDetailList;this.getSongListDetail(),t.current.onscroll=function(){var r=t.current.getBoundingClientRect().top;e.current.getBoundingClientRect().top-r-630<0&&n.getSongListDetailByTrackIds()}}},{key:"componentWillUnmount",value:function(){this.detailDom.current.onscroll=null}},{key:"getSongListDetail",value:function(){var n=(0,p.Z)(y().mark((function n(){var t,e,r,i,o=this;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.props.params.id,n.next=3,w.Z.get("/playlist/detail?id=".concat(t));case 3:e=n.sent,r=e.playlist,i=e.playlist.trackIds,this.setState((function(){return{detail:r,trackIdsArr:i}}),(function(){o.getSongListDetailByTrackIds()}));case 7:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"getSongListDetailByTrackIds",value:function(){var n=(0,p.Z)(y().mark((function n(){var t=this;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.state.getNewDetailList){n.next=3;break}return n.abrupt("return");case 3:this.setState((function(){return{getNewDetailList:!1}}),(0,p.Z)(y().mark((function n(){var e,r,i,o,c,a,s,u,l;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.state,r=e.trackIdsArr,i=e.songDetailList,o=i.length,c=r.slice(o,o+10).map((function(n){return n.id})),n.next=5,w.Z.get("/song/detail",{params:{ids:c.join(",")}});case 5:a=n.sent,s=a.songs,u=j()(i,s),(l=u.length!==r.length)||(t.detailDom.current.onscroll=null),t.setState((function(){return{songDetailList:u,getNewDetailList:l,showLoading:l}}));case 11:case"end":return n.stop()}}),n)}))));case 4:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"render",value:function(){var n=this.state,t=n.detail,e=n.songDetailList,r=n.showLoading;return(0,N.jsxs)(D,{"data-name":"\u6b4c\u5355\u8be6\u60c5",ref:this.detailDom,children:[(0,N.jsxs)(S,{children:[(null===t||void 0===t?void 0:t.coverImgUrl)&&(0,N.jsx)(L,{src:t.coverImgUrl}),(0,N.jsxs)(O,{children:[(0,N.jsxs)(z,{children:[(0,N.jsxs)(C,{children:[(0,N.jsx)(E.Z,{name:"play",fontSize:"16px"}),"\u64ad\u653e"]}),(0,N.jsxs)(R,{children:[(0,N.jsx)(E.Z,{name:"add",fontSize:"16px"}),"Add"]})]}),(0,N.jsx)(B,{children:t.description}),(0,N.jsx)(I,{children:t.name})]})]}),(0,N.jsx)(_.Z,{list:e}),r&&(0,N.jsx)(T,{ref:this.loadingDom,children:(0,N.jsx)(A.Z,{})})]})}}]),e}(b.Component),H=(0,U.E)(M)},2703:function(n,t,e){"use strict";e.d(t,{L:function(){return i},l:function(){return r}});var r=function(n){var t=n.toString(),e=t.split("").length;return e>8?"".concat(t.slice(0,e-8),"\u4ebf"):e>4?"".concat(t.slice(0,e-4),"\u4e07"):"".concat(n)},i=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Math.floor(n/1e3),e="00:00";if(t<60&&t>0)e="00:".concat(t);else{var r={num:Math.floor(t/60),length:"".concat(Math.floor(t/60)).length},i={num:t-60*r.num,length:"".concat(t-60*r.num).toString().length},o=r.length<=1?"0".concat(r.num):"".concat(r.num),c=i.length<=1?"0".concat(i.num):"".concat(i.num);e="".concat(o,":").concat(c)}return e}},5182:function(n,t,e){var r=e(1705),i=e(3529);n.exports=function n(t,e,o,c,a){var s=-1,u=t.length;for(o||(o=i),a||(a=[]);++s<u;){var l=t[s];e>0&&o(l)?e>1?n(l,e-1,o,c,a):r(a,l):c||(a[a.length]=l)}return a}},5099:function(n,t,e){var r=e(372)();n.exports=r},8664:function(n,t,e){var r=e(8092),i=e(2936),o=e(4221),c=Object.prototype.hasOwnProperty;n.exports=function(n){if(!r(n))return o(n);var t=i(n),e=[];for(var a in n)("constructor"!=a||!t&&c.call(n,a))&&e.push(a);return e}},3410:function(n,t,e){var r=e(2100);n.exports=function(n){return"function"==typeof n?n:r}},291:function(n){n.exports=function(n,t){var e=-1,r=n.length;for(t||(t=Array(r));++e<r;)t[e]=n[e];return t}},372:function(n){n.exports=function(n){return function(t,e,r){for(var i=-1,o=Object(t),c=r(t),a=c.length;a--;){var s=c[n?a:++i];if(!1===e(o[s],s,o))break}return t}}},3529:function(n,t,e){var r=e(7197),i=e(4963),o=e(3629),c=r?r.isConcatSpreadable:void 0;n.exports=function(n){return o(n)||i(n)||!!(c&&n&&n[c])}},4221:function(n){n.exports=function(n){var t=[];if(null!=n)for(var e in Object(n))t.push(e);return t}},1316:function(n,t,e){var r=e(1705),i=e(5182),o=e(291),c=e(3629);n.exports=function(){var n=arguments.length;if(!n)return[];for(var t=Array(n-1),e=arguments[0],a=n;a--;)t[a-1]=arguments[a];return r(c(e)?o(e):[e],i(t,1))}},9144:function(n,t,e){var r=e(5099),i=e(3410),o=e(3961);n.exports=function(n,t){return null==n?n:r(n,i(t),o)}},3961:function(n,t,e){var r=e(7538),i=e(8664),o=e(1473);n.exports=function(n){return o(n)?r(n,!0):i(n)}},5671:function(n,t,e){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}e.d(t,{Z:function(){return r}})},3144:function(n,t,e){"use strict";function r(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function i(n,t,e){return t&&r(n.prototype,t),e&&r(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}e.d(t,{Z:function(){return i}})},5716:function(n,t,e){"use strict";function r(n){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},r(n)}function i(n){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},i(n)}function o(n,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function c(n){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var e,i=r(n);if(t){var c=r(this).constructor;e=Reflect.construct(i,arguments,c)}else e=i.apply(this,arguments);return o(this,e)}}e.d(t,{Z:function(){return c}})},9340:function(n,t,e){"use strict";function r(n,t){return r=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},r(n,t)}function i(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&r(n,t)}e.d(t,{Z:function(){return i}})}}]);
//# sourceMappingURL=420.918fde38.chunk.js.map