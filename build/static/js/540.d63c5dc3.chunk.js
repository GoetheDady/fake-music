"use strict";(self.webpackChunkmusic=self.webpackChunkmusic||[]).push([[540],{9396:function(n,e,t){var i=t(4569),r=t.n(i),a=t(3567),o=r().create({baseURL:"http://localhost:4000/",timeout:5e3,responseType:"json",withCredentials:!0,crossDomain:!0,headers:{"Content-Type":"application/json;charset=utf-8"}});o.interceptors.response.use((function(n){return n.data}),(function(n){var e=n.response,t=e.data,i=t.code,r=t.msg,o=t.message,s=e.data;return 301===i&&(0,a.yw)({type:"error",msg:r,message:o}),s})),e.Z=o},2540:function(n,e,t){t.r(e),t.d(e,{default:function(){return xn}});var i,r,a,o,s,c,p,l,d,u,g,x,f,h,m,v,Z,b,y,j,k,w=t(5861),P=t(885),C=t(7757),S=t.n(C),z=t(2791),N=t(168),T=t(5751),L=T.ZP.div(i||(i=(0,N.Z)(["\n  width: 100%;\n  height: 100%;\n  padding: 30px;\n  padding-bottom: 0;\n  overflow: hidden;\n  box-sizing: border-box;\n  overflow: auto;\n  scrollbar-width: none;\n  &::-webkit-scrollbar {\n    display: none; /* Chrome Safari */\n  }\n"]))),I=(T.ZP.div(r||(r=(0,N.Z)([""]))),t(9396)),E=T.ZP.div(a||(a=(0,N.Z)(["\n  width: 100%;\n  height: 170px;\n  background-image: url(",");\n  background-size: 200%;\n  background-position: center center;\n  position: relative;\n  border-radius: 8px;\n  overflow: hidden;\n  user-select: none;\n  margin-bottom: 20px;\n"])),(function(n){return n.background})),U=T.ZP.div(o||(o=(0,N.Z)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, .4);\n  backdrop-filter: blur(50px);\n  display: flex;\n  align-items: center;\n  padding-left: 15px;\n"]))),M=T.ZP.img(s||(s=(0,N.Z)(["\n  width: 140px;\n  height: 140px;\n  object-fit: cover;\n  border-radius: 6px;\n  margin-right: 10px;\n"]))),D=T.ZP.div(c||(c=(0,N.Z)(["\n  flex: 1;\n"]))),q=T.ZP.div(p||(p=(0,N.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 14px;\n  height: 28px;\n  border: 1px solid #deac67;\n  color: #deac67;\n  width: 100px;\n  font-size: 14px;\n  margin-bottom: 16px;\n"]))),A=T.ZP.span(l||(l=(0,N.Z)(["\n  display: flex;\n  align-items: center;\n  margin-right: 5px;\n  color: #deac67;\n"]))),R=T.ZP.div(d||(d=(0,N.Z)(["\n  margin-bottom: 10px;\n"]))),O=T.ZP.div(u||(u=(0,N.Z)(["\n  font-size: 14px;\n  color: rgba(255, 255, 255, .4);\n"]))),B=T.ZP.div(g||(g=(0,N.Z)(["\n  display: flex;\n"]))),F=T.ZP.div(x||(x=(0,N.Z)(["\n  display: flex;\n  font-size: 12px;\n  padding: 0 15px;\n  cursor: default;\n  user-select: none;\n  height: 20px;\n  background-color: rgba(155, 178, 210, .2);\n  align-items: center;\n  border-radius: 10px;\n  margin-right: 10px;\n  margin-bottom: 15px;\n  &:hover {\n    background-color: rgba(155, 178, 210, .6);\n  }\n  &.active {\n    background-color: rgba(155, 178, 210, .6);\n  }\n"]))),G=T.ZP.div(f||(f=(0,N.Z)([""]))),H=T.ZP.div(h||(h=(0,N.Z)(["\n  display: grid;\n  grid-template-columns: repeat(5, 170px);\n  grid-row-gap: 30px;\n  justify-content: space-between;\n  min-height: 363px;\n  position: relative;\n"]))),J=T.ZP.div(m||(m=(0,N.Z)(["\n\n"]))),K=T.ZP.div(v||(v=(0,N.Z)(["\n  width: 170px;\n  height: 170px;\n  border-radius: 8px;\n  overflow: hidden;\n  margin-bottom: 10px;\n  position: relative;\n"]))),Q=T.ZP.img(Z||(Z=(0,N.Z)(["\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n"]))),V=T.ZP.div(b||(b=(0,N.Z)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  transition: all .5s;\n  background: linear-gradient(rgba(0, 0, 0, 0.4), transparent, rgba(0, 0, 0, 0.4));\n  &:hover {\n    background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4));\n  }\n"]))),W=T.ZP.div(y||(y=(0,N.Z)(["\n  font-size: 12px;\n"]))),X=T.ZP.div(j||(j=(0,N.Z)(["\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  display: flex;\n  align-items: center;\n  font-size: 12px;\n"]))),Y=T.ZP.div(k||(k=(0,N.Z)(["\n  position: absolute;\n  bottom: 5px;\n  left: 5px;\n  display: flex;\n  align-items: center;\n  font-size: 12px;\n"]))),$=t(184);var _=function(n){var e=n.currentTagIndex,t=(0,z.useState)([]),i=(0,P.Z)(t,2),r=i[0],a=i[1],o=function(){var n=(0,w.Z)(S().mark((function n(){var e,t;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I.Z.get("/top/playlist/highquality?limit=11");case 2:e=n.sent,t=e.playlists,a(void 0===t?[]:t);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,z.useEffect)((function(){o()}),[]),0!==r.length&&(0,$.jsx)(E,{background:r[e].coverImgUrl,children:(0,$.jsxs)(U,{children:[(0,$.jsx)(M,{src:r[e].coverImgUrl}),(0,$.jsxs)(D,{children:[(0,$.jsxs)(q,{children:[(0,$.jsx)(A,{children:(0,$.jsx)("ion-icon",{name:"diamond"})}),"\u7cbe\u54c1\u6b4c\u5355"]}),(0,$.jsx)(R,{children:r[e].name}),(0,$.jsx)(O,{children:r[e].copywriter})]})]})})},nn=t(1475),en=t.n(nn);var tn,rn=function(n){var e=(0,z.useState)(0),t=(0,P.Z)(e,2),i=t[0],r=t[1],a=n.list,o=void 0===a?[]:a,s=n.changeCurrentTag,c=function(n){var e=n.target.dataset.id;if(i===parseInt(e,10))r(0),s("",0);else{r(parseInt(e,10));var t=en()(o,(function(n){return n.id===parseInt(e,10)})),a=o[t];s((null===a||void 0===a?void 0:a.name)||"",t+1||0)}};return(0,$.jsx)(B,{children:o.map((function(n){return(0,$.jsx)(F,{"data-id":n.id,className:i===n.id&&"active",onClick:c,children:n.name},n.id)}))})},an=t(6871),on=t(5232),sn=t(6048),cn=t.n(sn),pn=T.ZP.div(tn||(tn=(0,N.Z)(["\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n  .pagination {\n    list-style: none;\n    display: flex;\n    padding: 0;\n    .pagination-item,\n    .pagination-point {\n      width: 44px;\n      justify-content: center;\n      align-items: center;\n    }\n    .pagination-prev,\n    .pagination-next {\n      width: 80px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n    .pagination-item,\n    .pagination-point,\n    .pagination-prev,\n    .pagination-next {\n      font-size: 14px;\n      display: flex;\n      height: 20px;\n      align-items: center;\n      background-color: rgba(155, 178, 210, .2);\n      border-radius: 10px;\n      margin: 0 5px;\n      cursor: pointer;\n      &:hover {\n        background-color: rgba(155, 178, 210, .6);\n      }\n      .pagination-item-a {\n        display: flex;\n        width: 100%;\n        height: 100%;\n        justify-content: center;\n        align-items: center;\n      }\n    }\n    .current-page {\n      background-color: rgba(155, 178, 210, .6);\n    }\n  }\n"])));var ln=function(n){var e=n.currentPag,t=n.handlePageClick,i=n.pageCount;return(0,$.jsx)(pn,{children:(0,$.jsx)(cn(),{forcePage:e,breakLabel:"...",nextLabel:"\u4e0b\u4e00\u9875 >",onPageChange:t,pageRangeDisplayed:3,pageCount:i,previousLabel:"< \u4e0a\u4e00\u9875",renderOnZeroPageCount:null,containerClassName:"pagination",activeClassName:"current-page",pageClassName:"pagination-item",breakLinkClassName:"pagination-point",previousLinkClassName:"pagination-prev",nextLinkClassName:"pagination-next",pageLinkClassName:"pagination-item-a"})})},dn=t(1241),un=t(3567);var gn=function(n){var e=n.currentTag,t=(0,z.useState)(1),i=(0,P.Z)(t,2),r=i[0],a=i[1],o=(0,z.useState)(0),s=(0,P.Z)(o,2),c=s[0],p=s[1],l=(0,z.useState)(!0),d=(0,P.Z)(l,2),u=d[0],g=d[1],x=(0,z.useState)([]),f=(0,P.Z)(x,2),h=f[0],m=f[1],v=(0,an.s0)(),Z=function(){var n=(0,w.Z)(S().mark((function n(){var t,i,r,o,s,c,l=arguments;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:0,g(!0),n.next=4,I.Z.get("/top/playlist",{params:{order:"hot",limit:20,cat:e,offset:20*t}});case 4:i=n.sent,r=i.playlists,o=void 0===r?[]:r,s=i.total,c=void 0===s?0:s,g(!1),p(t),a(Math.ceil(c/20)),m(o);case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,z.useEffect)((function(){Z(0)}),[e]),(0,$.jsxs)(G,{children:[(0,$.jsx)(H,{children:u?(0,$.jsx)(dn.Z,{}):h.map((function(n){return(0,$.jsxs)(J,{onClick:function(){var e;e=n.id,v("/songListDetail/".concat(e))},children:[(0,$.jsxs)(K,{children:[(0,$.jsx)(Q,{src:n.coverImgUrl}),(0,$.jsxs)(V,{children:[(0,$.jsxs)(X,{children:[(0,$.jsx)(on.Z,{name:"play-outline",fontSize:"12px"}),(0,un.lt)(n.playCount)]}),(0,$.jsxs)(Y,{children:[(0,$.jsx)(on.Z,{name:"person-outline",fontSize:"12px"}),n.creator.nickname]})]})]}),(0,$.jsx)(W,{children:n.name})]},n.id)}))}),!u&&(0,$.jsx)(ln,{currentPag:c,pageCount:r,handlePageClick:function(n){var e=n.selected;Z(e)}})]})};var xn=function(){var n=(0,z.useState)([]),e=(0,P.Z)(n,2),t=e[0],i=e[1],r=(0,z.useState)(""),a=(0,P.Z)(r,2),o=a[0],s=a[1],c=(0,z.useState)(0),p=(0,P.Z)(c,2),l=p[0],d=p[1],u=function(){var n=(0,w.Z)(S().mark((function n(){var e,t;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I.Z.get("/playlist/hot");case 2:e=n.sent,t=e.tags,i(t);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,z.useEffect)((function(){u()}),[]),(0,$.jsxs)(L,{children:[(0,$.jsx)(_,{currentTag:o,currentTagIndex:l}),(0,$.jsx)(rn,{list:t,changeCurrentTag:function(n,e){s(n),d(e)}}),(0,$.jsx)(gn,{currentTag:o})]})}},3567:function(n,e,t){t.d(e,{lt:function(){return f},LU:function(){return h},yw:function(){return m}});var i,r,a=t(1413),o=t(4164),s=t(168),c=t(2791),p=t(5751),l=t(5232),d=t(184),u=p.ZP.div(i||(i=(0,s.Z)(["\n  position: fixed;\n  top: 8px;\n  left: 0;\n  right: 0;\n  display: flex;\n  justify-content: center;\n"]))),g=p.ZP.div(r||(r=(0,s.Z)(["\n  display: flex;\n  padding: 10px 16px;\n  background: #fff;\n  border-radius: 2px;\n  box-shadow: 0 3px 6px -4px #0000001f,0 6px 16px #00000014,0 9px 28px 8px #0000000d;\n  font-size: 14px;\n  align-items: center;\n"])));var x=function(n){var e=n.destroy,t=n.message,i=n.msg,r={name:"close-circle-sharp",color:"red"};return"error"===n.type&&(r={name:"close-circle-sharp",color:"red"}),(0,c.useEffect)((function(){var n=setTimeout((function(){e()}),3e3);return function(){clearTimeout(n)}})),(0,d.jsx)(u,{children:(0,d.jsxs)(g,{children:[(0,d.jsx)(l.Z,(0,a.Z)((0,a.Z)({},r),{},{fontSize:"18px"})),"".concat(t,": ").concat(i)]})})},f=function(n){var e=n.toString(),t=e.split("").length;return t>8?"".concat(e.slice(0,t-8),"\u4ebf"):t>4?"".concat(e.slice(0,t-4),"\u4e07"):"".concat(n)},h=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=Math.floor(n/1e3),t="00:00";if(e<60&&e>0)t="00:".concat(e);else{var i={num:Math.floor(e/60),length:"".concat(Math.floor(e/60)).length},r={num:e-60*i.num,length:"".concat(e-60*i.num).toString().length},a=i.length<=1?"0".concat(i.num):"".concat(i.num),o=r.length<=1?"0".concat(r.num):"".concat(r.num);t="".concat(a,":").concat(o)}return t},m=function(n){var e=document.querySelector("#popup-window");e||((e=document.createElement("div")).setAttribute("id","popup-window"),document.body.appendChild(e));var t,i=(0,a.Z)({},n),r=function(){o.unmountComponentAtNode(e)&&e.parentNode&&e.parentNode.removeChild(e)};t=i,o.render((0,d.jsx)(x,(0,a.Z)({destroy:r},t)),e)}}}]);
//# sourceMappingURL=540.d63c5dc3.chunk.js.map